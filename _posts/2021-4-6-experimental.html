<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Experimental | Urmila J</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="30 Day Chart Challenge contribution 2021 by Urmila.">
    
    <link rel="preload" href="/30daychartchallenge/assets/css/0.styles.02421d88.css" as="style"><link rel="preload" href="/30daychartchallenge/assets/js/app.bd8bdbcf.js" as="script"><link rel="preload" href="/30daychartchallenge/assets/js/2.2e525a3d.js" as="script"><link rel="preload" href="/30daychartchallenge/assets/js/34.7421b3c8.js" as="script"><link rel="prefetch" href="/30daychartchallenge/assets/js/10.bd81b691.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/11.516d0fb2.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/12.0e40a051.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/13.b6687479.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/14.8594d23c.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/15.16fd3ec0.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/16.42cbdc52.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/17.cf2dd924.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/18.0173b01a.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/19.dbd7d002.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/20.75b1ff94.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/21.410a435f.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/22.68fe9605.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/23.3b65595a.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/24.b4a717b2.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/25.6fa1674e.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/26.7b899c36.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/27.256f0c22.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/28.009bc3bd.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/29.7e538b46.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/3.b76cff15.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/30.5f93defd.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/31.af4fe6a2.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/32.ee2bfe20.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/33.4642f797.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/35.bdc7d76c.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/36.17997cbd.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/37.5d1689bd.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/38.132f3370.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/39.cd0aef31.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/4.1778016d.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/40.df6cc9a6.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/41.14b50959.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/42.89cbb28c.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/43.926862f5.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/44.94cc6a53.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/5.62b724db.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/6.9c72bc75.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/7.e388c6fd.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/8.38f726ef.js"><link rel="prefetch" href="/30daychartchallenge/assets/js/9.f86c896a.js">
    <link rel="stylesheet" href="/30daychartchallenge/assets/css/0.styles.02421d88.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/30daychartchallenge/" class="home-link router-link-active"><!----> <span class="site-name">Urmila J</span></a> <div class="links"><!----> <nav class="nav-links can-hide"><div class="nav-item"><a href="/30daychartchallenge/Charts/" class="nav-link">
  Charts
</a></div><div class="nav-item"><a href="/30daychartchallenge/About/" class="nav-link">
  About
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/30daychartchallenge/Charts/" class="nav-link">
  Charts
</a></div><div class="nav-item"><a href="/30daychartchallenge/About/" class="nav-link">
  About
</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="indian-space-research-organisation-s-experimental-satellites"><a href="#indian-space-research-organisation-s-experimental-satellites" class="header-anchor">#</a> Indian Space Research Organisation's Experimental Satellites.</h1> <h2 id="week-1-comparisons-day-6-experimental"><a href="#week-1-comparisons-day-6-experimental" class="header-anchor">#</a> Week 1: Comparisons. Day 6: Experimental.</h2> <br> <p>Day 6's prompt was experimental. I was brainstorming for ideas and came across Indian Space Research Organisation's satellite launches over the years and the list had satellite's basic information and a particular column named 'application' which specified their use. The application column categorised the satellites on the following basis, that is, 'Communication', 'Earth Observation', 'Experimental', 'Navigation'. So the data for day six was finalized and I decided to make a force graph with circles in it representing satellites and mark the experimental satellites as yellow.
<br> <br></p> <p>The final chart is below.
<img src="/30daychartchallenge/images/day6/satellite.gif" alt="Satellite"></p> <br> <h2 id="data"><a href="#data" class="header-anchor">#</a> Data</h2> <p>Data Source: <a href="https://www.isro.gov.in/list-of-spacecrafts" target="_blank" rel="noopener noreferrer">Satellites Data<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>Data for the chart: Here is the link to the <a href="https://raw.githubusercontent.com/urmilaj/30daycharts2021/gh-pages/data/satellites.csv" target="_blank" rel="noopener noreferrer">data.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <br> <h2 id="create-the-chart-with-d3-js"><a href="#create-the-chart-with-d3-js" class="header-anchor">#</a> Create the chart with D3.js</h2> <br> <ul><li>Github link to <a href="https://urmilaj.github.io/30daycharts2021/satellites.html" target="_blank" rel="noopener noreferrer">chart<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and code <a href="https://github.com/urmilaj/30daycharts2021/blob/main/satellites.html" target="_blank" rel="noopener noreferrer">repository.<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>Setup the <a href="/30daychartchallenge/Charts.html">basic html. Follow the instructions here.</a></li> <li>Create the chart.</li></ul> <br> <p>Load the csv data using promise.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">csv</span><span class="token punctuation">(</span><span class="token string">&quot;data/satellites.csv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>Set up scales for your chart.</strong> <br>
D3's d3.scaleSqrt() helps to size your circles. My data contains mass information for each satellite, so I am using satellite's mass to be the size of the circle. If a satellite has a big mass, the corresponding circle will be bigger compared to others with smaller mass. Now to do this, use the scale's domain to specify this. Use d3's min and max utilities to retrieve this information from the data and use scale's range to specify that I would like the circles to be of radius of 8 pixels and 35 pixels.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> radius <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">scaleSqrt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">domain</span><span class="token punctuation">(</span><span class="token punctuation">[</span>d3<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token operator">+</span>d<span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">,</span> d3<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token operator">+</span>d<span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>This chart uses d3.forceSimulation() to creates alignment of circles without colliding with each other but also holds all of them together.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> simulation <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">forceSimulation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">force</span><span class="token punctuation">(</span><span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span> 
    d3<span class="token punctuation">.</span><span class="token function">forceCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span>width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span>height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">force</span><span class="token punctuation">(</span><span class="token string">&quot;charge&quot;</span><span class="token punctuation">,</span> 
    d3<span class="token punctuation">.</span><span class="token function">forceManyBody</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">strength</span><span class="token punctuation">(</span><span class="token number">.2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">force</span><span class="token punctuation">(</span><span class="token string">&quot;collide&quot;</span><span class="token punctuation">,</span>
    d3<span class="token punctuation">.</span><span class="token function">forceCollide</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">strength</span><span class="token punctuation">(</span><span class="token number">.5</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">radius</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Create/Append a group element and bind the data to it, to create the circles. Use ternary operators to fill the circle yellow if the application column categorises the satellite as experimental, white otherwise.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> circle <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token function">radius</span><span class="token punctuation">(</span><span class="token operator">+</span>d<span class="token punctuation">.</span>mass<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> width<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> height<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>d<span class="token punctuation">.</span>application <span class="token operator">==</span> <span class="token string">&quot;Experimental&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;#fec919&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;stroke&quot;</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>application <span class="token operator">==</span> <span class="token string">&quot;Experimental&quot;</span> <span class="token operator">?</span> <span class="token string">&quot;#fec919&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;white&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;stroke-width&quot;</span><span class="token punctuation">,</span> <span class="token number">2.5</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Use d3.annotation to create tooltips. In the previous chart examples, I had individual annotations with exact x, y coordinates, data etc. Since my data has a description column for the experimental satellites, I used that column to bind the data to the annotations and create the tooltips. <br>
Create a tooltip function.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// create a tooltip function.</span>
<span class="token keyword">function</span> <span class="token function">tooltip</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// filter the data for the experimental satellites, map the data.</span>
<span class="token comment">// Since we have used the force simulation, use the d.x and d.y attributes in the data</span>
<span class="token comment">// to use as anchor points for the label.</span>
    <span class="token keyword">let</span> labels <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>application <span class="token operator">==</span> <span class="token string">&quot;Experimental&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            x<span class="token operator">:</span> d<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
            y<span class="token operator">:</span> d<span class="token punctuation">.</span>y<span class="token punctuation">,</span>
            dx<span class="token operator">:</span> d<span class="token punctuation">.</span>dx <span class="token operator">||</span> d<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> <span class="token number">550</span> <span class="token operator">?</span> <span class="token number">50</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">50</span><span class="token punctuation">,</span>
            dy<span class="token operator">:</span> d<span class="token punctuation">.</span>dy <span class="token operator">||</span> d<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> <span class="token number">550</span> <span class="token operator">?</span> <span class="token number">30</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">30</span><span class="token punctuation">,</span>
            color<span class="token operator">:</span> <span class="token string">&quot;orange&quot;</span><span class="token punctuation">,</span>
            note<span class="token operator">:</span> <span class="token punctuation">{</span>
                title<span class="token operator">:</span> d<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
                label<span class="token operator">:</span> d<span class="token punctuation">.</span>description<span class="token punctuation">,</span>
                wrap<span class="token operator">:</span> <span class="token number">220</span><span class="token punctuation">,</span>
                align<span class="token operator">:</span> <span class="token string">&quot;middle&quot;</span><span class="token punctuation">,</span>
                bgPadding<span class="token operator">:</span> <span class="token number">1.5</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
            subject<span class="token operator">:</span> <span class="token punctuation">{</span>
                radius<span class="token operator">:</span> <span class="token number">22</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// use d3.annotation() to create tooltips.</span>
    <span class="token keyword">const</span> type <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">annotationCustomType</span><span class="token punctuation">(</span>d3<span class="token punctuation">.</span>annotationCalloutCircle<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        className<span class="token operator">:</span> <span class="token string">&quot;custom&quot;</span><span class="token punctuation">,</span>
        connector<span class="token operator">:</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;elbow&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        note<span class="token operator">:</span> <span class="token punctuation">{</span> lineType<span class="token operator">:</span> <span class="token string">&quot;vertical&quot;</span><span class="token punctuation">,</span> align<span class="token operator">:</span> <span class="token string">&quot;middle&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> makeAnnot <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">annotation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">editMode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">textWrap</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">annotations</span><span class="token punctuation">(</span>labels<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;subjectover&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">annotation</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          annotation<span class="token punctuation">.</span>type<span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;g.annotation-connector,g.annotation-note&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;visibility&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;visibile&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;subjectout&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">annotation</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
          annotation<span class="token punctuation">.</span>type<span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;g.annotation-connector,g.annotation-note&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;visibility&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hidden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// append the tooltips</span>
    svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>makeAnnot<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// make their visibility hidden and only show on user hover.   </span>
    svg<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;g.annotation-connector,g.annotation-note&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;visibility&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hidden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><p>To make the tooltips appear in the right position, you would have to call the tooltip after the simulation end, therefore use the .on() event listener and when the simulations &quot;end&quot;s , then call the tooltip.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>simulation<span class="token punctuation">.</span><span class="token function">nodes</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;tick&quot;</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> circle<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> d<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;end&quot;</span><span class="token punctuation">,</span> tooltip<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><br> <h2 id="additional-resources"><a href="#additional-resources" class="header-anchor">#</a> Additional Resources</h2> <ol><li><a href="https://bl.ocks.org/HarryStevens/f636199a46fc4b210fbca3b1dc4ef372" target="_blank" rel="noopener noreferrer">Force Simulation by Harry Stevens<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.d3-graph-gallery.com/graph/circularpacking_basic.html" target="_blank" rel="noopener noreferrer">Most basic circular packing by D3 Graph Gallery<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://bl.ocks.org/Fil/17fc857c3ce36bf8e21ddefab8bc9af4" target="_blank" rel="noopener noreferrer">D3-annotation to tooltip by Philippe Rivière<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/30daychartchallenge/_posts/2021-4-5-slope.html" class="prev">
        Slope
      </a></span> <span class="next"><a href="/30daychartchallenge/_posts/2021-4-7-physical.html">
        Physical
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/30daychartchallenge/assets/js/app.bd8bdbcf.js" defer></script><script src="/30daychartchallenge/assets/js/2.2e525a3d.js" defer></script><script src="/30daychartchallenge/assets/js/34.7421b3c8.js" defer></script>
  </body>
</html>
